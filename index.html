<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pomum</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="./images/pomumicon.ico">
  <script type="module" defer src="main.js"></script>
  <script type="module" defer src="loadshaders.js"></script>
</head>
<body>
<svg style="display:none">
  <filter id="holo-map" color-interpolation-filters="sRGB">
    <!-- Keep IDs for JS -->
     
    <feComponentTransfer in="SourceGraphic" result="colorMap">
      <feFuncR id="funcR" type="table" tableValues="0 0.5 1" />
      <feFuncG id="funcG" type="table" tableValues="0.5 1 0" />
      <feFuncB id="funcB" type="table" tableValues="1 0 0.5" />
    </feComponentTransfer>

    <!-- Blend step -->
    <feBlend in="SourceGraphic" in2="colorMap" mode="saturation" />
    <feComposite in="SourceGraphic" in2="colorMap"
  operator="arithmetic" k1="0" k2="0.6" k3="0.4" k4="0" />
  <!-- k2 = orginał, k3 = przefiltrowany -->
  </filter>
</svg>
<div class="volume-container logo">
  <input type="checkbox" id="VolumeButton" checked onclick="toggleSound()"/>
  <label for="VolumeButton" class="VolumeLabel"></label>
</div>

<div id="menu">
    <img class="logo" src="./images/pomumlogo.png" alt="Pomum" srcset="">
    <button id="startBtn" onclick="startGame()">Rozpocznij</button>
    <button onclick="showCollection()">Kolekcja</button>
    <button onclick="showSettings()">Ustawienia</button>
    <div id="collection" class="hidden">
      <button onclick="hideCollection()">Zamknij</button>
      <div class="scroll"></div>
    </div>
  </div>
  <div class="game" style="display: none;">
    <!-- Left panel: stats -->
    <div class="left-panel">
      <div class="location">
        <div class="round">
          <h2 id="opis">Zdobądź punkty aby przejść dalej</h2>
          <h1>Rundy do Bossa: <b id="bosscounter">4</b></h1>
        </div>
        <div id="boss-container"></div>
      </div>
      <div class="info">
        <table class="stats-table">
          <tr>
            <td class="roundscore" colspan="2">
              <span class="label">Zdobądź</span>
              <span id="roundscore" class="value">0</span>
            </td>
          </tr>

          <tr>
            <td class="moves">
              <span class="label">Ruchy</span>
              <span id="moves" class="value">0 / 10</span>
            </td>
            <td class="roundlevel">
              <span class="label">Runda</span>
              <span id="round" class="value">1 / 1</span>
            </td>
          </tr>

          <tr>
            <td class="score" colspan="2">
              <span class="label">Twój wynik</span>
              <span id="score" class="value">0</span>
            </td>
          </tr>
          <tr>
             <td colspan="2" class="playerscore">
              <span class="label">Wynik</span>
                <section class="calcscore">
                  <span id="tempscore">0</span> x <span id="mult">1</span>
                </section>
             </td>
          </tr>
          <tr>
            <td class="money" colspan="2">
              <span id="money" class="value">$2</span>
            </td>
          </tr>
          <tr>
              <td class="button">
                <button class="label" onclick="showInfo()">Info</button>
              </td>
              <td class="button">
                <button class="label" onclick="showSettings()">Ust.</button>
              </td>
          </tr>
        </table>
        
      </div>
    </div>

    <!-- Right panel: upgrades, game, shop -->
    <div class="right-panel">
      
      <!-- Player upgrades -->
      <div id="player-upgrades">
        <div class="upgrade-group upgrades">
          <div id="player-upgrades-container"></div>
          <label><b id="upgrades-counter">(0/4)</b></label>
        </div>
        <div class="upgrade-group consumables">
          <div id="player-consumables-container"></div>
          <label><b id="consumables-counter">(0/2)</b></label>
        </div>
      </div>

      <!-- Game grid -->
      <div id="body"></div>

      <!-- Shop -->
      <div id="shop">
        
        <div id="shop-buttons-container">
          <button class="shopbutton" onclick="reroll()">Odśwież sklep ($4)</button>
          <button class="shopbutton" onclick="startRound()">Kontynuuj</button>
        </div>
        <div id="upgrades-container"></div>
        <div id="boosterpack-container"></div>
        <div id="voucher-container"></div>
        
      </div>
      <div id="upgrade-tiles">
        <div class="container">
                <p id="booster-amount">Wybierz karty</p>
                <div id="consumables-container"></div>
                <button class="upgradetiles" onclick="skip()">Kontynuuj</button>
            </div>
      </div>
    </div>
  </div>
  <div id="game-over">
    <div class="game-over-content">
      <h1 class="game-over">Game Over</h1>
      <p class="game-over">Runda: <span id="final-score">0</span></p>
      <p class="game-over">Seed: <b id="seed"></b></p>
      <div id="final-upgrades"></div>
      <button onclick="restartGame()">Restart</button>
      <button onclick="showMenu()">Menu</button>
    </div>
  </div>
  <div id="info-container">
    <div class="game-over-content">
      <div id="tiles"></div>
      <button onclick="hideInfo()">Zamknij</button>
      <!--
        tutaj informacje o owocach
      -->
    </div>
  </div>
  <div id="settingsPanel">
    <div id="settingsPanel-content">
      <button onclick="hideSettings()" class="closePopup">&times</button>
      <h2>Ustawienia</h2>
      <label>
        Rozmiar kafelków
        <input disabled type="range" min="20" step="5" max="100" />
      </label>
      <label>
        Szybkość gry<br>
        Szybka <input id="gameSpeed" onchange="changeGameSpeed()" value="350" type="range" min="150" step="200" max="750" /> Wolna 
      </label>
      <label>
        Głośność
        <input type="range" min="100" step="250" max="1100" disabled/>
      </label>
      <label>
        <input onclick="toggleDarkMode()" type="checkbox" id="darkToggle">
        Tryb ciemny
      </label>
    </div>
    </div>
  <canvas id="glcanvas"></canvas>
</body>
</html>
